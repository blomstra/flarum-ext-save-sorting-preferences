(()=>{var e={n:o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return e.d(r,{a:r}),r},d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const r=flarum.core.compat["common/app"];e.n(r)().initializers.add("blomstra/save-sorting-preferences",(function(){}));const t=flarum.core.compat["common/components/Dropdown"];var n=e.n(t);const s=flarum.core.compat["forum/app"];var a=e.n(s);const c=flarum.core.compat["forum/components/IndexPage"];var u=e.n(c);const i=flarum.core.compat["common/extend"],l=flarum.core.compat["common/utils/ItemList"];var d=e.n(l);const p=flarum.core.compat["common/components/Button"];var f=e.n(p);a().initializers.add("blomstra/save-sorting-preferences",(function(){var e=a().search.params().sort;a().data.session.userId&&(0,i.override)(u().prototype,"viewItems",(function(o){var r,t=new(d()),s=a().discussions.sortMap();e||(e=null==(r=a().session.user)||null==(r=r.preferences())?void 0:r.discussion_sort);var c=Object.keys(s).reduce((function(e,o){return e[o]=a().translator.trans("core.forum.index_sort."+o+"_button"),e}),{});return t.add("sort",m(n(),{buttonClassName:"Button",label:c[e]||Object.keys(s).map((function(e){return c[e]}))[0],accessibleToggleLabel:a().translator.trans("core.forum.index_sort.toggle_dropdown_accessible_label")},Object.keys(c).map((function(o){var r=c[o],t=(e||Object.keys(s)[0])===o;return m(f(),{icon:!t||"fas fa-check",onclick:function(){var r;a().search.changeSort.bind(a().search,o)(),e=o,null==(r=a().session.user)||r.savePreferences({discussion_sort:o})},active:t},r)})))),t}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map